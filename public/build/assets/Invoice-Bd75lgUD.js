import{r as d,u as ze,b as Qe,j as e,C as ye}from"./index-D77JVx93.js";/* empty css                */import{a as b,b as o,c as S}from"./index.esm-CnYARBHd.js";import{a as Ve,p as ve}from"./api-C2dAnRUz.js";import{P as Be}from"./ProjectSelectionModal-DvSrAtUM.js";import{u as $e,C as Ce,a as He,b as Ye,c as Ze,d as Xe,e as Je}from"./DefaultLayout-B9m2Op0L.js";import{C as Ke,a as De}from"./CCardBody-CmpV1lA4.js";import{C as es}from"./CCardHeader-CTLciU6o.js";import{C as Ne}from"./CForm-CvVYu-wE.js";import{C as i}from"./CFormLabel-Dc8HuNh9.js";import{C as j}from"./CInputGroup-iSurCesp.js";import{C as l}from"./CFormInput-l8xIFq1a.js";import{C as _}from"./CInputGroupText-BPolkdL-.js";import{c as se}from"./cil-x-0440B5Ce.js";import{c as ss}from"./cil-search-CDkY_4k-.js";import{c as we}from"./cil-plus-D8mtC-W5.js";import{C as ts}from"./CFormSelect-BEYL04sy.js";import{C as f}from"./CButton-1GsZ7-l4.js";import{c as Se}from"./cil-pencil-m516yCOw.js";import{C as rs}from"./CFormTextarea-BeYCqixl.js";import"./CTable-_iNV6x85.js";import"./RawMaterial-BtjEDAbB.js";import"./cil-mobile-CeKkmNgt.js";import"./CFormControlWrapper-Bm4xoNnJ.js";const As=({editMode:P=!1,initialData:c=null,onSubmit:te=null})=>{const[Pe,Ae]=d.useState(!1),[A,re]=d.useState(!1),[B,ne]=d.useState(!0);d.useState();const oe=ze();$e();const{showToast:v}=Qe(),[ke,ae]=d.useState(!1),[$,k]=d.useState([]),[x,R]=d.useState(""),[W,C]=d.useState(!1),[H,F]=d.useState([]),[ce,le]=d.useState(!1),Y=d.useRef(null),Z=d.useRef(null),[n,G]=d.useState({projectId:null,projectName:"",customer_id:null,customer_name:"",address:"",mobile_number:"",customer:{name:"",address:"",mobile:""},invoiceType:1,invoiceDate:new Date().toISOString().split("T")[0],deliveryDate:new Date().toISOString().split("T")[0],discount:0,paidAmount:0,subtotal:0,taxableAmount:0,gstAmount:0,sgstAmount:0,cgstAmount:0,igstAmount:0,finalAmount:0,gstPercentage:18,sgstPercentage:9,cgstPercentage:9,igstPercentage:0,ref_id:"",po_number:"",gstOnGstMode:!1}),[N,U]=d.useState([{work_type:"",uom:"",qty:0,price:0,total_price:0,gst_percent:18,cgst_amount:0,sgst_amount:0,remark:""}]),[Te,E]=d.useState(!1),[w,me]=d.useState({customer_name:"",mobile_number:"",project_name:"",work_place:""}),de=["25% Advance release on team mobilization onsite.","25% Release on completion of pile foundation.","20% Release after completion of MMS and Module mounting.","20% to be released on completion of AC/DC.","10% released after work has been completed and handed over to the client."],[L,z]=d.useState(de),[Ie,X]=d.useState(-1),[ie,ue]=d.useState(""),[J,he]=d.useState(""),je=["18% Tax Extra","ROW on your side","Work will commence only after receiving an official work order"],[q,Q]=d.useState(je),[Fe,K]=d.useState(-1),[xe,pe]=d.useState(""),[D,ge]=d.useState(""),[be,fe]=d.useState(""),Ge=()=>Math.max(0,n.finalAmount-n.paidAmount),M=d.useCallback(async(s="")=>{ne(!0);try{const t=s?`/api/projects?searchQuery=${encodeURIComponent(s)}`:"/api/projects",r=await Ve(t);console.log("Fetched projects (raw):",r);const a=Array.isArray(r)?r:r==null?void 0:r.data;if(!a||!Array.isArray(a)){console.log("Invalid API response - no data array"),k([]),s||v("warning","No projects data available from server");return}const u=a.map(m=>({id:m.id,project_name:m.project_name||"Unknown Project",customer_name:m.customer_name||"Unknown Customer",work_place:m.work_place||"",project_cost:m.project_cost||"0",mobile_number:m.mobile_number||"",gst_number:m.gst_number||"",remark:m.remark||"",customer_id:m.customer_id||m.id,customer:{name:m.customer_name||"Unknown",address:m.work_place||"N/A",mobile:m.mobile_number||"N/A"},start_date:m.start_date,end_date:m.end_date})).filter(m=>m.project_name&&m.customer_id);console.log("Transformed projects:",u),k(u),u.length===0&&!s&&v("warning","No valid projects found - check API data")}catch(t){console.error("Error fetching projects:",t),k([]),s||v("danger","Failed to fetch projects")}finally{ne(!1)}},[]);d.useEffect(()=>{var s,t,r;P&&c&&(G({projectId:c.projectId,projectName:c.projectName,customer_id:c.customer_id,customer_name:((s=c.customer)==null?void 0:s.name)||"",address:((t=c.customer)==null?void 0:t.address)||"",mobile_number:((r=c.customer)==null?void 0:r.mobile)||"",customer:c.customer,invoiceType:c.invoiceType,invoiceDate:c.invoiceDate,deliveryDate:c.deliveryDate||new Date().toISOString().split("T")[0],discount:c.discount||0,paidAmount:c.paidAmount||0,subtotal:c.subtotal||0,taxableAmount:c.taxableAmount||0,gstAmount:c.gstAmount||0,sgstAmount:c.sgst||0,cgstAmount:c.cgst||0,igstAmount:c.igst||0,finalAmount:c.finalAmount||0,gstPercentage:c.gstPercentage||18,sgstPercentage:c.sgstPercentage||9,cgstPercentage:c.cgstPercentage||9,igstPercentage:c.igstPercentage||0,ref_id:c.ref_id,po_number:c.po_number||""}),U(c.items||[{work_type:"",uom:"",qty:0,price:0,total_price:0,remark:""}]),R(c.projectName||""),ee(c.items||N),z(c.payment_terms?c.payment_terms.split(`
`):de),Q(c.terms_and_conditions?c.terms_and_conditions.split(`
`):je),fe(c.note||""))},[P,c]),d.useEffect(()=>{M()},[M]),d.useEffect(()=>{const s=setTimeout(()=>{x&&x.length>2&&!ce&&!n.projectId?M(x):(k([]),F([]),C(!1)),le(!1)},300);return()=>clearTimeout(s)},[x,M,ce,n.projectId]),d.useEffect(()=>{if(x&&$.length>0&&!n.projectId){const s=x.toLowerCase(),t=$.filter(r=>r.project_name&&r.project_name.toLowerCase().includes(s)||r.customer_name&&r.customer_name.toLowerCase().includes(s)||r.work_place&&r.work_place.toLowerCase().includes(s)||r.mobile_number&&r.mobile_number.includes(s)||r.remark&&r.remark.toLowerCase().includes(s));console.log("Filtered projects:",t,"Query:",x),F(t),C(t.length>0&&x.length>2&&!n.projectId)}else F([]),C(!1)},[x,$,n.projectId]),d.useEffect(()=>{const s=t=>{Y.current&&!Y.current.contains(t.target)&&Z.current&&!Z.current.contains(t.target)&&C(!1)};return W&&document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[W]);const _e=s=>{console.log("Selected project:",s),G(t=>{var r,a,u,m;return{...t,projectId:s.id,projectName:s.project_name,customer_id:s.customer_id||s.id,customer_name:s.customer_name||((r=s.customer)==null?void 0:r.name)||"",address:s.work_place||s.location||"",mobile_number:s.mobile_number||((a=s.customer)==null?void 0:a.mobile)||"",customer:{name:s.customer_name||((u=s.customer)==null?void 0:u.name)||"",address:s.work_place||s.location||"",mobile:s.mobile_number||((m=s.customer)==null?void 0:m.mobile)||""}}}),R(s.project_name),le(!0),C(!1),k([]),F([])},Ee=()=>{G(s=>({...s,projectId:null,projectName:"",customer_id:null,customer_name:"",address:"",mobile_number:"",customer:{name:"",address:"",mobile:""}})),R(""),C(!1),k([]),F([])},y=s=>{const{name:t,value:r}=s.target;G(a=>{let u={...a,[t]:t==="discount"||t==="paidAmount"||t.endsWith("Percentage")?parseFloat(r)||0:r};if(t==="gstPercentage"){const h=(parseFloat(r)||0)/2;u={...u,sgstPercentage:h,cgstPercentage:h}}else if(t==="sgstPercentage"||t==="cgstPercentage"){const m=t==="sgstPercentage"?parseFloat(r)||0:a.sgstPercentage,h=t==="cgstPercentage"?parseFloat(r)||0:a.cgstPercentage;u={...u,gstPercentage:m+h}}if(t==="discount"||t.endsWith("Percentage")){const m=N.reduce((We,Ue)=>We+(Ue.total_price||0),0),h=m-u.discount,p=h*(u.sgstPercentage/100),g=h*(u.cgstPercentage/100),O=h*(u.igstPercentage/100),V=p+g+O,Re=h+V;u={...u,subtotal:m,taxableAmount:h,gstAmount:V,sgstAmount:p,cgstAmount:g,igstAmount:O,finalAmount:Re}}return u})},T=(s,t,r)=>{const a=[...N];t==="qty"||t==="price"||t==="gst_percent"?a[s][t]=parseFloat(r)||0:a[s][t]=r;const u=a[s].qty||0,m=a[s].price||0,h=a[s].gst_percent||0,p=u*m,g=p*(h/2/100),O=p*(h/2/100),V=p+g+O;a[s].total_price=V,a[s].cgst_amount=g,a[s].sgst_amount=O,U(a),ee(a)},Le=()=>{U([...N,{work_type:"",uom:"",qty:0,price:0,total_price:0,gst_percent:18,cgst_amount:0,sgst_amount:0,remark:""}])},qe=s=>{const t=[...N];t.splice(s,1),U(t),ee(t)},ee=s=>{G(t=>{const r=s.reduce((p,g)=>p+g.qty*g.price,0),a=s.reduce((p,g)=>p+g.cgst_amount,0),u=s.reduce((p,g)=>p+g.sgst_amount,0),m=a+u,h=s.reduce((p,g)=>p+g.total_price,0);return{...t,subtotal:r,taxableAmount:r,gstAmount:m,cgstAmount:a,sgstAmount:u,igstAmount:0,finalAmount:h-(t.discount||0)}})},Me=async s=>{if(s.preventDefault(),!s.currentTarget.checkValidity()){Ae(!0);return}if(!n.projectId||!n.customer_id){v("danger","Please select a project with a valid customer");return}try{re(!0);const r={...n,project_id:n.projectId,customer_name:n.customer_name,address:n.address,mobile_number:n.mobile_number,items:N.filter(a=>a.work_type&&a.qty>0),payment_terms:L.join(`
`),terms_and_conditions:q.join(`
`),note:be};if(console.log("Submitting data:",r),P&&te)await te(r);else{const a=await ve("/api/order",r);a&&(v("success","Invoice created successfully"),oe(`/invoice-details/${a.id}`))}}catch(r){console.error("Submit error:",r),v("danger","Failed to create invoice")}finally{re(!1)}},I=s=>{const{name:t,value:r}=s.target;me(a=>({...a,[t]:r}))},Oe=async()=>{try{await ve("/api/projects",w)&&(v("success","Project added successfully"),E(!1),me({customer_name:"",mobile_number:"",project_name:"",work_place:"",is_confirm:0}),M())}catch(s){console.error("Error adding project:",s),v("danger","Failed to add project")}};return e.jsxs(b,{children:[e.jsx(o,{xs:12,children:e.jsxs(Ke,{className:"mb-4",children:[e.jsx(es,{children:e.jsx("strong",{children:P?"Edit Invoice":"Create Invoice"})}),e.jsx(De,{children:e.jsxs(Ne,{validated:Pe,onSubmit:Me,children:[e.jsxs(b,{className:"mb-3",children:[e.jsxs(o,{md:6,children:[e.jsx(i,{children:"Project Name *"}),e.jsxs("div",{ref:Y,style:{position:"relative"},children:[e.jsxs(j,{children:[e.jsx(l,{type:"text",value:x,onChange:s=>{R(s.target.value),n.projectId?C(!1):C(s.target.value.length>2)},placeholder:"Search by project name, customer, location...",required:!0}),e.jsx(_,{className:"cursor-pointer",onClick:()=>{n.projectName||x?Ee():ae(!0)},children:e.jsx(S,{icon:n.projectName||x?se:ss})})]}),B&&W&&x.length>2&&e.jsxs("div",{className:"dropdown-menu show p-2",children:[e.jsx(ye,{size:"sm"})," Loading projects..."]}),W&&H.length>0&&!n.projectId&&e.jsxs("div",{ref:Z,className:"dropdown-menu show",style:{maxHeight:"300px",overflowY:"auto"},children:[H.map(s=>e.jsxs("div",{className:"dropdown-item cursor-pointer p-2 border-bottom",onClick:()=>_e(s),onMouseEnter:t=>t.target.style.backgroundColor="#f8f9fa",onMouseLeave:t=>t.target.style.backgroundColor="white",children:[e.jsx("div",{className:"fw-medium text-primary",children:s.project_name}),e.jsxs("div",{className:"small text-muted",children:[e.jsx("strong",{children:"Customer:"})," ",s.customer_name]}),s.work_place&&e.jsxs("div",{className:"small text-muted",children:[e.jsx("strong",{children:"Location:"})," ",s.work_place]}),s.project_cost&&e.jsxs("div",{className:"small text-success",children:[e.jsx("strong",{children:"Amount:"})," ₹",s.project_cost]}),s.mobile_number&&e.jsxs("div",{className:"small text-muted",children:[e.jsx("strong",{children:"Mobile:"})," ",s.mobile_number]})]},s.id)),!n.projectId&&e.jsxs("div",{className:"dropdown-item cursor-pointer p-2 border-top text-primary",onClick:()=>E(!0),children:[e.jsx(S,{icon:we,className:"me-2"}),"Add New Project"]})]}),x.length>2&&H.length===0&&!B&&!n.projectId&&e.jsx("div",{className:"dropdown-menu show",style:{maxHeight:"300px",overflowY:"auto"},children:e.jsxs("div",{className:"dropdown-item cursor-pointer p-2 border-top text-primary",onClick:()=>E(!0),children:[e.jsx(S,{icon:we,className:"me-2"}),"Add New Project"]})})]}),n.projectName&&e.jsxs("div",{className:"mt-1 p-2 bg-light rounded border",children:[e.jsxs("div",{className:"small text-success",children:[e.jsx("strong",{children:"Selected:"})," ",n.projectName]}),e.jsxs("div",{className:"small text-muted",children:[e.jsx("strong",{children:"Customer:"})," ",n.customer.name]}),n.customer.address&&e.jsxs("div",{className:"small text-muted",children:[e.jsx("strong",{children:"Location:"})," ",n.customer.address]})]})]}),e.jsxs(o,{md:6,children:[e.jsx(i,{children:"Invoice Date *"}),e.jsx(l,{type:"date",name:"invoiceDate",value:n.invoiceDate,onChange:y,required:!0})]})]}),e.jsxs(b,{className:"mb-3",children:[e.jsxs(o,{md:4,children:[e.jsx(i,{children:"Invoice Date *"}),e.jsx(l,{type:"date",name:"deliveryDate",value:n.deliveryDate,onChange:y,required:!0})]}),e.jsxs(o,{md:4,children:[e.jsx(i,{children:"Reference ID"}),e.jsx(l,{type:"text",name:"ref_id",value:n.ref_id,onChange:y,placeholder:"Enter Reference ID"})]}),e.jsxs(o,{md:4,children:[e.jsx(i,{children:"Po Number"}),e.jsx(l,{type:"text",name:"po_number",value:n.po_number,onChange:y,placeholder:"Enter PO Number"})]})]}),e.jsxs(b,{className:"mb-3",children:[e.jsxs(o,{md:4,children:[e.jsx(i,{children:"Customer Name"}),e.jsx(l,{value:n.customer.name,readOnly:!0,placeholder:"Select a project to populate"})]}),e.jsxs(o,{md:4,children:[e.jsx(i,{children:"Work Location"}),e.jsx(l,{value:n.customer.address,readOnly:!0,placeholder:"Select a project to populate"})]}),e.jsxs(o,{md:4,children:[e.jsx(i,{children:"Customer Mobile"}),e.jsx(l,{value:n.customer.mobile,readOnly:!0,placeholder:"Select a project to populate"})]})]}),e.jsx(b,{className:"mb-3",children:e.jsxs(o,{md:6,children:[e.jsx(i,{children:"Invoice Type *"}),e.jsxs(ts,{name:"invoiceType",value:n.invoiceType,onChange:y,required:!0,children:[e.jsx("option",{value:1,children:"Quotation"}),e.jsx("option",{value:2,children:"Work Order"})]})]})}),e.jsx("h6",{className:"mt-4 mb-3 fw-semibold text-primary border-bottom border-primary pb-2",children:"Work Details"}),N.map((s,t)=>e.jsxs(b,{className:"g-3 mb-3 align-items-end",children:[e.jsx(o,{md:2,children:e.jsx(l,{label:"Work Type",placeholder:"Work Type",value:s.work_type,onChange:r=>T(t,"work_type",r.target.value),required:!0})}),e.jsx(o,{md:1,children:e.jsx(l,{label:"Unit",placeholder:"UMO",value:s.uom,onChange:r=>T(t,"uom",r.target.value)})}),e.jsx(o,{md:1,children:e.jsx(l,{label:"Qty",type:"number",step:"0.01",min:"0",value:s.qty,onChange:r=>T(t,"qty",r.target.value),required:!0})}),e.jsxs(o,{md:1,children:[e.jsx(i,{children:"Rate"}),e.jsxs(j,{children:[e.jsx(_,{children:"₹"}),e.jsx(l,{type:"number",step:"0.01",min:"0",value:s.price,onChange:r=>T(t,"price",r.target.value),required:!0})]})]}),e.jsxs(o,{md:1,children:[e.jsx(i,{children:"Base Amt"}),e.jsxs("div",{className:"fw-medium",children:["₹",(s.qty*s.price).toFixed(2)]})]}),e.jsx(o,{md:1,children:e.jsx(l,{label:"GST %",type:"number",step:"0.01",min:"0",max:"100",value:s.gst_percent,onChange:r=>T(t,"gst_percent",r.target.value)})}),e.jsxs(o,{md:1,children:[e.jsx(i,{children:"CGST"}),e.jsxs("div",{className:"text-success fw-medium",children:["₹",s.cgst_amount]})]}),e.jsxs(o,{md:1,children:[e.jsx(i,{children:"SGST"}),e.jsxs("div",{className:"text-success fw-medium",children:["₹",s.sgst_amount]})]}),e.jsxs(o,{md:1,children:[e.jsx(i,{className:"text-primary",children:"Total"}),e.jsxs("div",{className:"fw-bold text-primary",children:["₹",s.total_price]})]}),e.jsx(o,{md:1,children:e.jsx(l,{label:"Remark",placeholder:"Optional",value:s.remark,onChange:r=>T(t,"remark",r.target.value)})}),e.jsx(o,{md:1,className:"d-flex align-items-end",children:e.jsx(f,{color:"danger",size:"sm",onClick:()=>qe(t),disabled:N.length===1,children:"×"})})]},t)),e.jsx(f,{color:"warning",variant:"outline",className:"mb-4",onClick:Le,children:"+ Add Work"}),e.jsx("h6",{className:"mt-4 mb-3 fw-semibold text-primary border-bottom border-primary pb-2",children:"GST Details"}),e.jsxs(b,{className:"mb-3",children:[e.jsxs(o,{md:3,children:[e.jsx(i,{children:"Total GST (%)"}),e.jsxs(j,{children:[e.jsx(l,{type:"number",name:"gstPercentage",value:n.gstPercentage,onChange:y,min:"0",max:"100",step:"0.01",disabled:A,placeholder:"18.00"}),e.jsx(_,{children:"%"})]}),e.jsx("div",{className:"form-text text-muted",children:e.jsxs("small",{children:["GST Amount: ₹",n.gstAmount.toFixed(2)]})})]}),e.jsxs(o,{md:3,children:[e.jsx(i,{children:"SGST (%)"}),e.jsxs(j,{children:[e.jsx(l,{type:"number",name:"sgstPercentage",value:n.sgstPercentage,onChange:y,min:"0",max:"50",step:"0.01",disabled:A,placeholder:"9.00"}),e.jsx(_,{children:"%"})]}),e.jsx("div",{className:"form-text text-muted",children:e.jsxs("small",{children:["SGST Amount: ₹",n.sgstAmount.toFixed(2)]})})]}),e.jsxs(o,{md:3,children:[e.jsx(i,{children:"CGST (%)"}),e.jsxs(j,{children:[e.jsx(l,{type:"number",name:"cgstPercentage",value:n.cgstPercentage,onChange:y,min:"0",max:"50",step:"0.01",disabled:A,placeholder:"9.00"}),e.jsx(_,{children:"%"})]}),e.jsx("div",{className:"form-text text-muted",children:e.jsxs("small",{children:["CGST Amount: ₹",n.cgstAmount.toFixed(2)]})})]}),e.jsxs(o,{md:3,children:[e.jsx(i,{children:"IGST (%)"}),e.jsxs(j,{children:[e.jsx(l,{type:"number",name:"igstPercentage",value:n.igstPercentage,onChange:y,min:"0",max:"100",step:"0.01",disabled:A,placeholder:"0.00"}),e.jsx(_,{children:"%"})]}),e.jsx("div",{className:"form-text text-muted",children:e.jsxs("small",{children:["IGST Amount: ₹",n.igstAmount.toFixed(2)]})})]})]}),e.jsx("div",{className:"alert alert-info border-0 bg-info-subtle mb-3",children:e.jsx("div",{className:"d-flex",children:e.jsxs("div",{children:[e.jsx("strong",{className:"text-info",children:"Auto-Calculation:"}),e.jsxs("ul",{className:"mb-0 mt-1 text-info",children:[e.jsx("li",{children:e.jsx("small",{children:"Enter total GST % to auto-split into CGST and SGST"})}),e.jsx("li",{children:e.jsx("small",{children:"Modify CGST or SGST to auto-update total GST %"})})]})]})})}),e.jsxs(b,{className:"mb-3",children:[e.jsxs(o,{md:4,children:[e.jsx(i,{children:"Subtotal"}),e.jsxs(j,{children:[e.jsx(_,{children:"₹"}),e.jsx(l,{type:"number",value:n.subtotal.toFixed(2),readOnly:!0})]})]}),e.jsxs(o,{md:4,children:[e.jsx(i,{children:"Taxable Amount"}),e.jsxs(j,{children:[e.jsx(_,{children:"₹"}),e.jsx(l,{type:"number",value:n.taxableAmount.toFixed(2),readOnly:!0})]})]}),e.jsxs(o,{md:4,children:[e.jsx(i,{children:"GST Amount"}),e.jsxs(j,{children:[e.jsx(_,{children:"₹"}),e.jsx(l,{type:"number",value:n.gstAmount.toFixed(2),readOnly:!0})]})]})]}),e.jsxs(b,{className:"mb-3",children:[e.jsxs(o,{md:6,children:[e.jsx(i,{children:"Final Amount"}),e.jsxs(j,{children:[e.jsx(_,{children:"₹"}),e.jsx(l,{type:"number",value:n.finalAmount.toFixed(2),readOnly:!0})]})]}),e.jsxs(o,{md:6,children:[e.jsx(i,{children:"Remaining Amount"}),e.jsxs(j,{children:[e.jsx(_,{children:"₹"}),e.jsx(l,{type:"number",value:Ge().toFixed(2),readOnly:!0,className:"text-danger fw-medium"})]})]})]}),e.jsx("h6",{className:"mt-4 mb-3 fw-semibold text-primary border-bottom border-primary pb-2",children:"Payment Terms"}),e.jsx("div",{className:"d-flex flex-wrap gap-2 mb-3",children:L.map((s,t)=>Ie===t?e.jsxs(j,{style:{width:"auto"},children:[e.jsx(l,{value:ie,onChange:r=>ue(r.target.value)}),e.jsx(f,{color:"success",onClick:()=>{const r=[...L];r[t]=ie,z(r),X(-1)},children:"Save"}),e.jsx(f,{color:"secondary",onClick:()=>X(-1),children:"Cancel"})]},t):e.jsxs(Ce,{color:"info",className:"me-1 mb-1",style:{fontSize:"0.9em"},children:[s,e.jsx(S,{icon:Se,className:"ms-2",style:{cursor:"pointer"},onClick:()=>{X(t),ue(s)}}),e.jsx(S,{icon:se,className:"ms-1",style:{cursor:"pointer"},onClick:()=>{z(L.filter((r,a)=>a!==t))}})]},t))}),e.jsx(b,{className:"mb-3",children:e.jsx(o,{md:6,children:e.jsxs(j,{children:[e.jsx(l,{placeholder:"Add new payment term...",value:J,onChange:s=>he(s.target.value)}),e.jsx(f,{color:"primary",onClick:()=>{J.trim()&&(z([...L,J.trim()]),he(""))},children:"Add"})]})})}),e.jsx("h6",{className:"mt-4 mb-3 fw-semibold text-primary border-bottom border-primary pb-2",children:"Terms & Conditions"}),e.jsx("div",{className:"d-flex flex-wrap gap-2 mb-3",children:q.map((s,t)=>Fe===t?e.jsxs(j,{style:{width:"auto"},children:[e.jsx(l,{value:xe,onChange:r=>pe(r.target.value)}),e.jsx(f,{color:"success",onClick:()=>{const r=[...q];r[t]=xe,Q(r),K(-1)},children:"Save"}),e.jsx(f,{color:"secondary",onClick:()=>K(-1),children:"Cancel"})]},t):e.jsxs(Ce,{color:"warning",className:"me-1 mb-1",style:{fontSize:"0.9em"},children:[s,e.jsx(S,{icon:Se,className:"ms-2",style:{cursor:"pointer"},onClick:()=>{K(t),pe(s)}}),e.jsx(S,{icon:se,className:"ms-1",style:{cursor:"pointer"},onClick:()=>{Q(q.filter((r,a)=>a!==t))}})]},t))}),e.jsx(b,{className:"mb-3",children:e.jsx(o,{md:6,children:e.jsxs(j,{children:[e.jsx(l,{placeholder:"Add new condition...",value:D,onChange:s=>ge(s.target.value)}),e.jsx(f,{color:"primary",onClick:()=>{D.trim()&&(Q([...q,D.trim()]),ge(""))},children:"Add"})]})})}),e.jsx("h6",{className:"mt-4 mb-2 fw-semibold text-primary border-bottom border-primary pb-2",children:"Additional Note"}),e.jsx(rs,{type:"text",className:"mb-3",placeholder:"Enter note if any...",value:be,onChange:s=>fe(s.target.value)}),e.jsx(f,{color:"primary",type:"submit",disabled:A||!n.projectId||!n.customer_id||B,children:A?e.jsx(ye,{size:"sm"}):P?"Update Invoice":"Submit Invoice"}),"  ",P&&e.jsx(f,{color:"secondary",type:"button",onClick:()=>oe("/invoiceTable"),children:"Close"})]})})]})}),e.jsxs(He,{visible:Te,onClose:()=>E(!1),children:[e.jsx(Ye,{children:e.jsx(Ze,{children:"Add New Project"})}),e.jsx(Xe,{children:e.jsxs(Ne,{children:[e.jsxs(b,{className:"mb-3",children:[e.jsxs(o,{md:6,children:[e.jsx(i,{children:"Customer Name *"}),e.jsx(l,{type:"text",name:"customer_name",value:w.customer_name,onChange:I,required:!0,maxLength:255})]}),e.jsxs(o,{md:6,children:[e.jsx(i,{children:"Mobile Number *"}),e.jsx(l,{type:"text",name:"mobile_number",value:w.mobile_number,onChange:I,required:!0,maxLength:10,minLength:10,pattern:"^[0-9]{10}$",placeholder:"Enter 10-digit mobile number"})]})]}),e.jsxs(b,{className:"mb-3",children:[e.jsxs(o,{md:6,children:[e.jsx(i,{children:"Project Name *"}),e.jsx(l,{type:"text",name:"project_name",value:w.project_name,onChange:I,required:!0,maxLength:255})]}),e.jsxs(o,{md:6,children:[e.jsx(i,{children:"Work Place"}),e.jsx(l,{type:"text",name:"work_place",value:w.work_place,onChange:I,maxLength:255})]})]}),e.jsxs(b,{className:"mb-3",children:[e.jsxs(o,{md:6,children:[e.jsx(i,{children:"GST number"}),e.jsx(l,{type:"text",name:"gst_number",value:w.gst_number,onChange:s=>{const t=s.target.value.toUpperCase();/^[A-Z0-9]{0,15}$/.test(t)&&I({target:{name:"gst_number",value:t}})},required:!0,maxLength:15,minLength:15,placeholder:"Enter GST number (15 chars)"})]}),e.jsxs(o,{md:6,children:[e.jsx(i,{children:"Pan Card number"}),e.jsx(l,{type:"text",name:"pan_number",value:w.pan_number,onChange:s=>{const t=s.target.value.toUpperCase();/^[A-Z0-9]{0,10}$/.test(t)&&I({target:{name:"pan_number",value:t}})},required:!0,maxLength:10,minLength:10,placeholder:"Enter PAN number (10 chars)"})]})]})]})}),e.jsxs(Je,{children:[e.jsx(f,{color:"secondary",onClick:()=>E(!1),children:"Close"}),e.jsx(f,{color:"primary",onClick:Oe,children:"Save"})]})]}),e.jsx(Be,{visible:ke,onClose:()=>ae(!1),onSelectProject:_e})]})};export{As as default};
