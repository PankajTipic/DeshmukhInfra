const u="userData";function d(t){try{return t?JSON.parse(t):null}catch(r){return console.warn("Failed to parse stored user data:",r),null}}function f(){try{const t="__localStorage_test__";return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(t){return console.warn("localStorage is not available:",t),!1}}function y(t){return t&&typeof t=="object"&&t.token&&(t.user||t.partner)}function w(t){if(!f())return console.error("localStorage is not available"),!1;if(!y(t))return console.error("Invalid user data provided"),!1;try{const r={...t,_timestamp:Date.now()};return localStorage.setItem(u,JSON.stringify(r)),!0}catch(r){return console.error("Failed to store user data:",r),!1}}function s(){if(!f())return null;try{const t=localStorage.getItem(u),r=d(t);return!r||typeof r!="object"?(console.warn("Invalid or corrupted user data found"),p(),null):r}catch(t){return console.error("Error retrieving user data:",t),null}}function p(){if(!f())return!1;try{return localStorage.removeItem(u),!0}catch(t){return console.error("Failed to delete user data:",t),!1}}function g(){const t=s();return!!(t&&t.token&&(t.user||t.partner))}function m(){return g()}function c(){const t=s();return(t==null?void 0:t.token)??null}function E(){var r,e;const t=s();return((r=t==null?void 0:t.user)==null?void 0:r.type)??((e=t==null?void 0:t.partner)==null?void 0:e.type)??null}function S(){const t=s();return(t==null?void 0:t.user)??(t==null?void 0:t.partner)??null}const n="";async function T(t){return await a(n+"/api/register",t)}async function j(t="",r){try{const e=c(),o=await fetch(t,{method:"POST",headers:{Accept:"application/json",Authorization:`Bearer ${e}`},body:r});return o.ok||i(o,t),o.json()}catch(e){throw console.error("Error posting form data:",e),e}}async function k(t="",r){try{const e=c(),o=await fetch(t,{method:"POST",headers:{Accept:"application/json",Authorization:`Bearer ${e}`},body:r});return o.ok||i(o,t),o.json()}catch(e){throw console.error("Error posting form data:",e),e}}async function a(t="",r={},e="POST"){try{const o=c(),l=await fetch(t,{method:e,headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify(r)});return l.ok||i(l,t),l.json()}catch(o){throw console.error(`Error with ${e} request to ${t}:`,o),o}}async function h(t="",r="GET"){try{const e=c(),o=await fetch(t,{method:r,headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${e}`}});return o.ok||i(o,t),o.json()}catch(e){throw console.error(`Error with ${r} request to ${t}:`,e),e}}function i(t,r){throw t.status===401&&!r.includes("/login")&&(p(),window.location.replace("/")),t.status===422&&t.json().then(e=>{if(e.message)throw new Error(e.message)}),new Error(`HTTP error! status: ${t.status}`)}async function A(){return await a(n+"/api/logout")}async function v(){return await a(n+"/api/logoutEverywhere")}async function I(t,r){return await a(n+t,r)}async function O(t,r){return await a(n+t,r,"PUT")}async function P(t,r){return await a(n+t,r)}async function b(t){return await h(n+t)}async function $(t){return await h(n+t,"DELETE")}export{b as a,O as b,j as c,$ as d,E as e,P as f,S as g,n as h,m as i,k as j,p as k,A as l,v as m,I as p,T as r,w as s};
