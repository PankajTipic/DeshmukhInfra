import{r as m,u as Qe,b as ze,j as e,C as Ce}from"./index-C2h9iXsq.js";/* empty css                */import{a as x,b as c,c as w}from"./index.esm-DQbyd5df.js";import{a as Ve,p as ve}from"./api-C2dAnRUz.js";import{P as $e}from"./ProjectSelectionModal-B4H1mPqU.js";import{u as Be,C as _e,a as He,b as Ye,c as Ze,d as Xe,e as Je}from"./DefaultLayout-Bb3k2Kjc.js";import{C as Ke,a as De}from"./CCardBody-DHWC5_BS.js";import{C as es}from"./CCardHeader-BOYr8GAh.js";import{C as we}from"./CForm-BVvPNiqY.js";import{C as d}from"./CFormLabel-DkkhltaS.js";import{C as h}from"./CInputGroup-DQyo9You.js";import{C as l}from"./CFormInput-Da28fgYD.js";import{C as b}from"./CInputGroupText-UmKIgDi2.js";import{c as se}from"./cil-x-0440B5Ce.js";import{c as ss}from"./cil-search-CDkY_4k-.js";import{c as Ne}from"./cil-plus-D8mtC-W5.js";import{C as ts}from"./CFormSelect-ukCskt8P.js";import{C as g}from"./CButton--W_4ZeJh.js";import{c as Pe}from"./cil-pencil-m516yCOw.js";import{C as rs}from"./CFormTextarea-OofZxR1Z.js";import"./CTable-B2fFA3gN.js";import"./RawMaterial-BtjEDAbB.js";import"./cil-mobile-CRjBRZgk.js";import"./CFormControlWrapper-CgtL4Ts4.js";const As=({editMode:N=!1,initialData:o=null,onSubmit:te=null})=>{const[Se,Ae]=m.useState(!1),[P,re]=m.useState(!1),[$,ne]=m.useState(!0);m.useState();const oe=Qe();Be();const{showToast:y}=ze(),[ke,ae]=m.useState(!1),[B,S]=m.useState([]),[j,q]=m.useState(""),[R,C]=m.useState(!1),[H,k]=m.useState([]),[ce,le]=m.useState(!1),Y=m.useRef(null),Z=m.useRef(null),[n,T]=m.useState({projectId:null,projectName:"",customer_id:null,customer_name:"",address:"",mobile_number:"",customer:{name:"",address:"",mobile:""},invoiceType:1,invoiceDate:new Date().toISOString().split("T")[0],deliveryDate:new Date().toISOString().split("T")[0],discount:0,paidAmount:0,subtotal:0,taxableAmount:0,gstAmount:0,sgstAmount:0,cgstAmount:0,igstAmount:0,finalAmount:0,gstPercentage:18,sgstPercentage:9,cgstPercentage:9,igstPercentage:0,ref_id:"",po_number:""}),[v,O]=m.useState([{work_type:"",uom:"",qty:0,price:0,total_price:0,remark:""}]),[Te,I]=m.useState(!1),[_,me]=m.useState({customer_name:"",mobile_number:"",project_name:"",work_place:""}),ie=["25% Advance release on team mobilization onsite.","25% Release on completion of pile foundation.","20% Release after completion of MMS and Module mounting.","20% to be released on completion of AC/DC.","10% released after work has been completed and handed over to the client."],[F,W]=m.useState(ie),[Ie,X]=m.useState(-1),[de,ue]=m.useState(""),[J,he]=m.useState(""),je=["18% Tax Extra","ROW on your side","Work will commence only after receiving an official work order"],[E,U]=m.useState(je),[Fe,K]=m.useState(-1),[xe,pe]=m.useState(""),[D,ge]=m.useState(""),[be,fe]=m.useState(""),Ee=()=>Math.max(0,n.finalAmount-n.paidAmount),L=m.useCallback(async(s="")=>{ne(!0);try{const t=s?`/api/projects?searchQuery=${encodeURIComponent(s)}`:"/api/projects",r=await Ve(t);console.log("Fetched projects (raw):",r);const a=Array.isArray(r)?r:r==null?void 0:r.data;if(!a||!Array.isArray(a)){console.log("Invalid API response - no data array"),S([]),s||y("warning","No projects data available from server");return}const u=a.map(i=>({id:i.id,project_name:i.project_name||"Unknown Project",customer_name:i.customer_name||"Unknown Customer",work_place:i.work_place||"",project_cost:i.project_cost||"0",mobile_number:i.mobile_number||"",gst_number:i.gst_number||"",remark:i.remark||"",customer_id:i.customer_id||i.id,customer:{name:i.customer_name||"Unknown",address:i.work_place||"N/A",mobile:i.mobile_number||"N/A"},start_date:i.start_date,end_date:i.end_date})).filter(i=>i.project_name&&i.customer_id);console.log("Transformed projects:",u),S(u),u.length===0&&!s&&y("warning","No valid projects found - check API data")}catch(t){console.error("Error fetching projects:",t),S([]),s||y("danger","Failed to fetch projects")}finally{ne(!1)}},[]);m.useEffect(()=>{var s,t,r;N&&o&&(T({projectId:o.projectId,projectName:o.projectName,customer_id:o.customer_id,customer_name:((s=o.customer)==null?void 0:s.name)||"",address:((t=o.customer)==null?void 0:t.address)||"",mobile_number:((r=o.customer)==null?void 0:r.mobile)||"",customer:o.customer,invoiceType:o.invoiceType,invoiceDate:o.invoiceDate,deliveryDate:o.deliveryDate||new Date().toISOString().split("T")[0],discount:o.discount||0,paidAmount:o.paidAmount||0,subtotal:o.subtotal||0,taxableAmount:o.taxableAmount||0,gstAmount:o.gstAmount||0,sgstAmount:o.sgst||0,cgstAmount:o.cgst||0,igstAmount:o.igst||0,finalAmount:o.finalAmount||0,gstPercentage:o.gstPercentage||18,sgstPercentage:o.sgstPercentage||9,cgstPercentage:o.cgstPercentage||9,igstPercentage:o.igstPercentage||0,ref_id:o.ref_id,po_number:o.po_number||""}),O(o.items||[{work_type:"",uom:"",qty:0,price:0,total_price:0,remark:""}]),q(o.projectName||""),ee(o.items||v),W(o.payment_terms?o.payment_terms.split(`
`):ie),U(o.terms_and_conditions?o.terms_and_conditions.split(`
`):je),fe(o.note||""))},[N,o]),m.useEffect(()=>{L()},[L]),m.useEffect(()=>{const s=setTimeout(()=>{j&&j.length>2&&!ce&&!n.projectId?L(j):(S([]),k([]),C(!1)),le(!1)},300);return()=>clearTimeout(s)},[j,L,ce,n.projectId]),m.useEffect(()=>{if(j&&B.length>0&&!n.projectId){const s=j.toLowerCase(),t=B.filter(r=>r.project_name&&r.project_name.toLowerCase().includes(s)||r.customer_name&&r.customer_name.toLowerCase().includes(s)||r.work_place&&r.work_place.toLowerCase().includes(s)||r.mobile_number&&r.mobile_number.includes(s)||r.remark&&r.remark.toLowerCase().includes(s));console.log("Filtered projects:",t,"Query:",j),k(t),C(t.length>0&&j.length>2&&!n.projectId)}else k([]),C(!1)},[j,B,n.projectId]),m.useEffect(()=>{const s=t=>{Y.current&&!Y.current.contains(t.target)&&Z.current&&!Z.current.contains(t.target)&&C(!1)};return R&&document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[R]);const ye=s=>{console.log("Selected project:",s),T(t=>{var r,a,u,i;return{...t,projectId:s.id,projectName:s.project_name,customer_id:s.customer_id||s.id,customer_name:s.customer_name||((r=s.customer)==null?void 0:r.name)||"",address:s.work_place||s.location||"",mobile_number:s.mobile_number||((a=s.customer)==null?void 0:a.mobile)||"",customer:{name:s.customer_name||((u=s.customer)==null?void 0:u.name)||"",address:s.work_place||s.location||"",mobile:s.mobile_number||((i=s.customer)==null?void 0:i.mobile)||""}}}),q(s.project_name),le(!0),C(!1),S([]),k([])},Le=()=>{T(s=>({...s,projectId:null,projectName:"",customer_id:null,customer_name:"",address:"",mobile_number:"",customer:{name:"",address:"",mobile:""}})),q(""),C(!1),S([]),k([])},f=s=>{const{name:t,value:r}=s.target;T(a=>{let u={...a,[t]:t==="discount"||t==="paidAmount"||t.endsWith("Percentage")?parseFloat(r)||0:r};if(t==="gstPercentage"){const p=(parseFloat(r)||0)/2;u={...u,sgstPercentage:p,cgstPercentage:p}}else if(t==="sgstPercentage"||t==="cgstPercentage"){const i=t==="sgstPercentage"?parseFloat(r)||0:a.sgstPercentage,p=t==="cgstPercentage"?parseFloat(r)||0:a.cgstPercentage;u={...u,gstPercentage:i+p}}if(t==="discount"||t.endsWith("Percentage")){const i=v.reduce((We,Ue)=>We+(Ue.total_price||0),0),p=i-u.discount,M=p*(u.sgstPercentage/100),Q=p*(u.cgstPercentage/100),z=p*(u.igstPercentage/100),V=M+Q+z,Oe=p+V;u={...u,subtotal:i,taxableAmount:p,gstAmount:V,sgstAmount:M,cgstAmount:Q,igstAmount:z,finalAmount:Oe}}return u})},G=(s,t,r)=>{const a=[...v];a[s][t]=t==="qty"||t==="price"?parseFloat(r)||0:r,a[s].total_price=(a[s].qty||0)*(a[s].price||0),O(a),ee(a)},Ge=()=>{O([...v,{work_type:"",uom:"",qty:0,price:0,total_price:0,remark:""}])},Me=s=>{const t=[...v];t.splice(s,1),O(t),ee(t)},ee=s=>{T(t=>{const r=s.reduce((z,V)=>z+(V.total_price||0),0),a=r-(t.discount||0),u=a*(t.sgstPercentage/100),i=a*(t.cgstPercentage/100),p=a*(t.igstPercentage/100),M=u+i+p,Q=a+M;return{...t,subtotal:r,taxableAmount:a,gstAmount:M,sgstAmount:u,cgstAmount:i,igstAmount:p,finalAmount:Q}})},qe=async s=>{if(s.preventDefault(),!s.currentTarget.checkValidity()){Ae(!0);return}if(!n.projectId||!n.customer_id){y("danger","Please select a project with a valid customer");return}try{re(!0);const r={...n,project_id:n.projectId,customer_name:n.customer_name,address:n.address,mobile_number:n.mobile_number,items:v.filter(a=>a.work_type&&a.qty>0),payment_terms:F.join(`
`),terms_and_conditions:E.join(`
`),note:be};if(console.log("Submitting data:",r),N&&te)await te(r);else{const a=await ve("/api/order",r);a&&(y("success","Invoice created successfully"),oe(`/invoice-details/${a.id}`))}}catch(r){console.error("Submit error:",r),y("danger","Failed to create invoice")}finally{re(!1)}},A=s=>{const{name:t,value:r}=s.target;me(a=>({...a,[t]:r}))},Re=async()=>{try{await ve("/api/projects",_)&&(y("success","Project added successfully"),I(!1),me({customer_name:"",mobile_number:"",project_name:"",work_place:"",is_confirm:0}),L())}catch(s){console.error("Error adding project:",s),y("danger","Failed to add project")}};return e.jsxs(x,{children:[e.jsx(c,{xs:12,children:e.jsxs(Ke,{className:"mb-4",children:[e.jsx(es,{children:e.jsx("strong",{children:N?"Edit Invoice":"Create Invoice"})}),e.jsx(De,{children:e.jsxs(we,{validated:Se,onSubmit:qe,children:[e.jsxs(x,{className:"mb-3",children:[e.jsxs(c,{md:6,children:[e.jsx(d,{children:"Project Name *"}),e.jsxs("div",{ref:Y,style:{position:"relative"},children:[e.jsxs(h,{children:[e.jsx(l,{type:"text",value:j,onChange:s=>{q(s.target.value),n.projectId?C(!1):C(s.target.value.length>2)},placeholder:"Search by project name, customer, location...",required:!0}),e.jsx(b,{className:"cursor-pointer",onClick:()=>{n.projectName||j?Le():ae(!0)},children:e.jsx(w,{icon:n.projectName||j?se:ss})})]}),$&&R&&j.length>2&&e.jsxs("div",{className:"dropdown-menu show p-2",children:[e.jsx(Ce,{size:"sm"})," Loading projects..."]}),R&&H.length>0&&!n.projectId&&e.jsxs("div",{ref:Z,className:"dropdown-menu show",style:{maxHeight:"300px",overflowY:"auto"},children:[H.map(s=>e.jsxs("div",{className:"dropdown-item cursor-pointer p-2 border-bottom",onClick:()=>ye(s),onMouseEnter:t=>t.target.style.backgroundColor="#f8f9fa",onMouseLeave:t=>t.target.style.backgroundColor="white",children:[e.jsx("div",{className:"fw-medium text-primary",children:s.project_name}),e.jsxs("div",{className:"small text-muted",children:[e.jsx("strong",{children:"Customer:"})," ",s.customer_name]}),s.work_place&&e.jsxs("div",{className:"small text-muted",children:[e.jsx("strong",{children:"Location:"})," ",s.work_place]}),s.project_cost&&e.jsxs("div",{className:"small text-success",children:[e.jsx("strong",{children:"Amount:"})," ₹",s.project_cost]}),s.mobile_number&&e.jsxs("div",{className:"small text-muted",children:[e.jsx("strong",{children:"Mobile:"})," ",s.mobile_number]})]},s.id)),!n.projectId&&e.jsxs("div",{className:"dropdown-item cursor-pointer p-2 border-top text-primary",onClick:()=>I(!0),children:[e.jsx(w,{icon:Ne,className:"me-2"}),"Add New Project"]})]}),j.length>2&&H.length===0&&!$&&!n.projectId&&e.jsx("div",{className:"dropdown-menu show",style:{maxHeight:"300px",overflowY:"auto"},children:e.jsxs("div",{className:"dropdown-item cursor-pointer p-2 border-top text-primary",onClick:()=>I(!0),children:[e.jsx(w,{icon:Ne,className:"me-2"}),"Add New Project"]})})]}),n.projectName&&e.jsxs("div",{className:"mt-1 p-2 bg-light rounded border",children:[e.jsxs("div",{className:"small text-success",children:[e.jsx("strong",{children:"Selected:"})," ",n.projectName]}),e.jsxs("div",{className:"small text-muted",children:[e.jsx("strong",{children:"Customer:"})," ",n.customer.name]}),n.customer.address&&e.jsxs("div",{className:"small text-muted",children:[e.jsx("strong",{children:"Location:"})," ",n.customer.address]})]})]}),e.jsxs(c,{md:6,children:[e.jsx(d,{children:"Invoice Date *"}),e.jsx(l,{type:"date",name:"invoiceDate",value:n.invoiceDate,onChange:f,required:!0})]})]}),e.jsxs(x,{className:"mb-3",children:[e.jsxs(c,{md:4,children:[e.jsx(d,{children:"Invoice Date *"}),e.jsx(l,{type:"date",name:"deliveryDate",value:n.deliveryDate,onChange:f,required:!0})]}),e.jsxs(c,{md:4,children:[e.jsx(d,{children:"Reference ID"}),e.jsx(l,{type:"text",name:"ref_id",value:n.ref_id,onChange:f,placeholder:"Enter Reference ID"})]}),e.jsxs(c,{md:4,children:[e.jsx(d,{children:"Po Number"}),e.jsx(l,{type:"text",name:"po_number",value:n.po_number,onChange:f,placeholder:"Enter PO Number"})]})]}),e.jsxs(x,{className:"mb-3",children:[e.jsxs(c,{md:4,children:[e.jsx(d,{children:"Customer Name"}),e.jsx(l,{value:n.customer.name,readOnly:!0,placeholder:"Select a project to populate"})]}),e.jsxs(c,{md:4,children:[e.jsx(d,{children:"Work Location"}),e.jsx(l,{value:n.customer.address,readOnly:!0,placeholder:"Select a project to populate"})]}),e.jsxs(c,{md:4,children:[e.jsx(d,{children:"Customer Mobile"}),e.jsx(l,{value:n.customer.mobile,readOnly:!0,placeholder:"Select a project to populate"})]})]}),e.jsx(x,{className:"mb-3",children:e.jsxs(c,{md:6,children:[e.jsx(d,{children:"Invoice Type *"}),e.jsxs(ts,{name:"invoiceType",value:n.invoiceType,onChange:f,required:!0,children:[e.jsx("option",{value:1,children:"Quotation"}),e.jsx("option",{value:2,children:"Work Order"})]})]})}),e.jsx("h6",{className:"mt-4 mb-3 fw-semibold text-primary border-bottom border-primary pb-2",children:"Work Details"}),v.map((s,t)=>e.jsxs(x,{className:"g-3 mb-3 align-items-center",children:[e.jsx(c,{md:2,children:e.jsx(l,{label:"Work Type",placeholder:"Work Type",value:s.work_type,onChange:r=>G(t,"work_type",r.target.value),required:!0})}),e.jsx(c,{md:2,children:e.jsx(l,{label:"Unit Of Measurement",placeholder:"Unit",value:s.uom,onChange:r=>G(t,"uom",r.target.value)})}),e.jsx(c,{md:2,children:e.jsx(l,{label:"Quantity",type:"number",step:"0.01",placeholder:"Quantity",value:s.qty,onChange:r=>G(t,"qty",parseFloat(r.target.value)||0),min:"0",required:!0})}),e.jsxs(c,{md:2,children:[e.jsx(d,{children:"Price"}),e.jsxs(h,{children:[e.jsx(b,{children:"₹"}),e.jsx(l,{type:"number",placeholder:"Price",value:s.price,onChange:r=>G(t,"price",parseFloat(r.target.value)||0),min:"0",step:"0.01",required:!0})]})]}),e.jsxs(c,{md:1,children:[e.jsx(d,{children:"Total"}),e.jsx("div",{children:e.jsxs("span",{className:"text-success fw-medium",children:["₹",s.total_price.toFixed(2)]})})]}),e.jsx(c,{md:2,children:e.jsx(l,{label:"Description",placeholder:"Remark",value:s.remark,onChange:r=>G(t,"remark",r.target.value)})}),e.jsx(c,{md:1,children:e.jsx(g,{color:"danger",size:"sm",onClick:()=>Me(t),disabled:v.length===1,children:"×"})})]},t)),e.jsx(g,{color:"warning",variant:"outline",className:"mb-4",onClick:Ge,children:"+ Add Work"}),e.jsx("h6",{className:"mt-4 mb-3 fw-semibold text-primary border-bottom border-primary pb-2",children:"GST Details"}),e.jsxs(x,{className:"mb-3",children:[e.jsxs(c,{md:3,children:[e.jsx(d,{children:"Total GST (%)"}),e.jsxs(h,{children:[e.jsx(l,{type:"number",name:"gstPercentage",value:n.gstPercentage,onChange:f,min:"0",max:"100",step:"0.01",disabled:P,placeholder:"18.00"}),e.jsx(b,{children:"%"})]}),e.jsx("div",{className:"form-text text-muted",children:e.jsxs("small",{children:["GST Amount: ₹",n.gstAmount.toFixed(2)]})})]}),e.jsxs(c,{md:3,children:[e.jsx(d,{children:"SGST (%)"}),e.jsxs(h,{children:[e.jsx(l,{type:"number",name:"sgstPercentage",value:n.sgstPercentage,onChange:f,min:"0",max:"50",step:"0.01",disabled:P,placeholder:"9.00"}),e.jsx(b,{children:"%"})]}),e.jsx("div",{className:"form-text text-muted",children:e.jsxs("small",{children:["SGST Amount: ₹",n.sgstAmount.toFixed(2)]})})]}),e.jsxs(c,{md:3,children:[e.jsx(d,{children:"CGST (%)"}),e.jsxs(h,{children:[e.jsx(l,{type:"number",name:"cgstPercentage",value:n.cgstPercentage,onChange:f,min:"0",max:"50",step:"0.01",disabled:P,placeholder:"9.00"}),e.jsx(b,{children:"%"})]}),e.jsx("div",{className:"form-text text-muted",children:e.jsxs("small",{children:["CGST Amount: ₹",n.cgstAmount.toFixed(2)]})})]}),e.jsxs(c,{md:3,children:[e.jsx(d,{children:"IGST (%)"}),e.jsxs(h,{children:[e.jsx(l,{type:"number",name:"igstPercentage",value:n.igstPercentage,onChange:f,min:"0",max:"100",step:"0.01",disabled:P,placeholder:"0.00"}),e.jsx(b,{children:"%"})]}),e.jsx("div",{className:"form-text text-muted",children:e.jsxs("small",{children:["IGST Amount: ₹",n.igstAmount.toFixed(2)]})})]})]}),e.jsx("div",{className:"alert alert-info border-0 bg-info-subtle mb-3",children:e.jsx("div",{className:"d-flex",children:e.jsxs("div",{children:[e.jsx("strong",{className:"text-info",children:"Auto-Calculation:"}),e.jsxs("ul",{className:"mb-0 mt-1 text-info",children:[e.jsx("li",{children:e.jsx("small",{children:"Enter total GST % to auto-split into CGST and SGST"})}),e.jsx("li",{children:e.jsx("small",{children:"Modify CGST or SGST to auto-update total GST %"})})]})]})})}),e.jsxs(x,{className:"mb-3",children:[e.jsxs(c,{md:4,children:[e.jsx(d,{children:"Subtotal"}),e.jsxs(h,{children:[e.jsx(b,{children:"₹"}),e.jsx(l,{type:"number",value:n.subtotal.toFixed(2),readOnly:!0})]})]}),e.jsxs(c,{md:4,children:[e.jsx(d,{children:"Taxable Amount"}),e.jsxs(h,{children:[e.jsx(b,{children:"₹"}),e.jsx(l,{type:"number",value:n.taxableAmount.toFixed(2),readOnly:!0})]})]}),e.jsxs(c,{md:4,children:[e.jsx(d,{children:"GST Amount"}),e.jsxs(h,{children:[e.jsx(b,{children:"₹"}),e.jsx(l,{type:"number",value:n.gstAmount.toFixed(2),readOnly:!0})]})]})]}),e.jsxs(x,{className:"mb-3",children:[e.jsxs(c,{md:6,children:[e.jsx(d,{children:"Final Amount"}),e.jsxs(h,{children:[e.jsx(b,{children:"₹"}),e.jsx(l,{type:"number",value:n.finalAmount.toFixed(2),readOnly:!0})]})]}),e.jsxs(c,{md:6,children:[e.jsx(d,{children:"Remaining Amount"}),e.jsxs(h,{children:[e.jsx(b,{children:"₹"}),e.jsx(l,{type:"number",value:Ee().toFixed(2),readOnly:!0,className:"text-danger fw-medium"})]})]})]}),e.jsx("h6",{className:"mt-4 mb-3 fw-semibold text-primary border-bottom border-primary pb-2",children:"Payment Terms"}),e.jsx("div",{className:"d-flex flex-wrap gap-2 mb-3",children:F.map((s,t)=>Ie===t?e.jsxs(h,{style:{width:"auto"},children:[e.jsx(l,{value:de,onChange:r=>ue(r.target.value)}),e.jsx(g,{color:"success",onClick:()=>{const r=[...F];r[t]=de,W(r),X(-1)},children:"Save"}),e.jsx(g,{color:"secondary",onClick:()=>X(-1),children:"Cancel"})]},t):e.jsxs(_e,{color:"info",className:"me-1 mb-1",style:{fontSize:"0.9em"},children:[s,e.jsx(w,{icon:Pe,className:"ms-2",style:{cursor:"pointer"},onClick:()=>{X(t),ue(s)}}),e.jsx(w,{icon:se,className:"ms-1",style:{cursor:"pointer"},onClick:()=>{W(F.filter((r,a)=>a!==t))}})]},t))}),e.jsx(x,{className:"mb-3",children:e.jsx(c,{md:6,children:e.jsxs(h,{children:[e.jsx(l,{placeholder:"Add new payment term...",value:J,onChange:s=>he(s.target.value)}),e.jsx(g,{color:"primary",onClick:()=>{J.trim()&&(W([...F,J.trim()]),he(""))},children:"Add"})]})})}),e.jsx("h6",{className:"mt-4 mb-3 fw-semibold text-primary border-bottom border-primary pb-2",children:"Terms & Conditions"}),e.jsx("div",{className:"d-flex flex-wrap gap-2 mb-3",children:E.map((s,t)=>Fe===t?e.jsxs(h,{style:{width:"auto"},children:[e.jsx(l,{value:xe,onChange:r=>pe(r.target.value)}),e.jsx(g,{color:"success",onClick:()=>{const r=[...E];r[t]=xe,U(r),K(-1)},children:"Save"}),e.jsx(g,{color:"secondary",onClick:()=>K(-1),children:"Cancel"})]},t):e.jsxs(_e,{color:"warning",className:"me-1 mb-1",style:{fontSize:"0.9em"},children:[s,e.jsx(w,{icon:Pe,className:"ms-2",style:{cursor:"pointer"},onClick:()=>{K(t),pe(s)}}),e.jsx(w,{icon:se,className:"ms-1",style:{cursor:"pointer"},onClick:()=>{U(E.filter((r,a)=>a!==t))}})]},t))}),e.jsx(x,{className:"mb-3",children:e.jsx(c,{md:6,children:e.jsxs(h,{children:[e.jsx(l,{placeholder:"Add new condition...",value:D,onChange:s=>ge(s.target.value)}),e.jsx(g,{color:"primary",onClick:()=>{D.trim()&&(U([...E,D.trim()]),ge(""))},children:"Add"})]})})}),e.jsx("h6",{className:"mt-4 mb-2 fw-semibold text-primary border-bottom border-primary pb-2",children:"Additional Note"}),e.jsx(rs,{type:"text",className:"mb-3",placeholder:"Enter note if any...",value:be,onChange:s=>fe(s.target.value)}),e.jsx(g,{color:"primary",type:"submit",disabled:P||!n.projectId||!n.customer_id||$,children:P?e.jsx(Ce,{size:"sm"}):N?"Update Invoice":"Submit Invoice"}),"  ",N&&e.jsx(g,{color:"secondary",type:"button",onClick:()=>oe("/invoiceTable"),children:"Close"})]})})]})}),e.jsxs(He,{visible:Te,onClose:()=>I(!1),children:[e.jsx(Ye,{children:e.jsx(Ze,{children:"Add New Project"})}),e.jsx(Xe,{children:e.jsxs(we,{children:[e.jsxs(x,{className:"mb-3",children:[e.jsxs(c,{md:6,children:[e.jsx(d,{children:"Customer Name *"}),e.jsx(l,{type:"text",name:"customer_name",value:_.customer_name,onChange:A,required:!0,maxLength:255})]}),e.jsxs(c,{md:6,children:[e.jsx(d,{children:"Mobile Number *"}),e.jsx(l,{type:"text",name:"mobile_number",value:_.mobile_number,onChange:A,required:!0,maxLength:10,minLength:10,pattern:"^[0-9]{10}$",placeholder:"Enter 10-digit mobile number"})]})]}),e.jsxs(x,{className:"mb-3",children:[e.jsxs(c,{md:6,children:[e.jsx(d,{children:"Project Name *"}),e.jsx(l,{type:"text",name:"project_name",value:_.project_name,onChange:A,required:!0,maxLength:255})]}),e.jsxs(c,{md:6,children:[e.jsx(d,{children:"Work Place"}),e.jsx(l,{type:"text",name:"work_place",value:_.work_place,onChange:A,maxLength:255})]})]}),e.jsxs(x,{className:"mb-3",children:[e.jsxs(c,{md:6,children:[e.jsx(d,{children:"GST number"}),e.jsx(l,{type:"text",name:"gst_number",value:_.gst_number,onChange:s=>{const t=s.target.value.toUpperCase();/^[A-Z0-9]{0,15}$/.test(t)&&A({target:{name:"gst_number",value:t}})},required:!0,maxLength:15,minLength:15,placeholder:"Enter GST number (15 chars)"})]}),e.jsxs(c,{md:6,children:[e.jsx(d,{children:"Pan Card number"}),e.jsx(l,{type:"text",name:"pan_number",value:_.pan_number,onChange:s=>{const t=s.target.value.toUpperCase();/^[A-Z0-9]{0,10}$/.test(t)&&A({target:{name:"pan_number",value:t}})},required:!0,maxLength:10,minLength:10,placeholder:"Enter PAN number (10 chars)"})]})]})]})}),e.jsxs(Je,{children:[e.jsx(g,{color:"secondary",onClick:()=>I(!1),children:"Close"}),e.jsx(g,{color:"primary",onClick:Re,children:"Save"})]})]}),e.jsx($e,{visible:ke,onClose:()=>ae(!1),onSelectProject:ye})]})};export{As as default};
