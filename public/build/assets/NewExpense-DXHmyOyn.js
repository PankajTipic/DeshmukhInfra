import{r as u,u as be,b as ye,k as K,j as e}from"./index-C2h9iXsq.js";import{a as Q,c as fe,p as ve}from"./api-C2dAnRUz.js";import{S as Se}from"./react-select.esm-BTZ6xrLn.js";import{r as Le,p as Ne}from"./Feilds-BHjWXeSc.js";import{a as X,b as Y,c as J}from"./index.esm-DQbyd5df.js";import{P as Ae}from"./ProjectSelectionModal-B4H1mPqU.js";import{u as Ce,a as Ee,b as Fe,c as Be,d as we,e as ke}from"./DefaultLayout-Bb3k2Kjc.js";import{C as Z,a as ee}from"./CCardBody-DHWC5_BS.js";import{C as se}from"./CCardHeader-BOYr8GAh.js";import{C as x}from"./CButton--W_4ZeJh.js";import{C as Ge}from"./CForm-BVvPNiqY.js";import{C as o}from"./CFormLabel-DkkhltaS.js";import{C as d}from"./CFormInput-Da28fgYD.js";import{c as Te}from"./cil-search-CDkY_4k-.js";import{c as Me}from"./cil-x-0440B5Ce.js";import{C as te}from"./CFormCheck-1aTfEnVQ.js";import{C as ne}from"./CFormSelect-ukCskt8P.js";import{C as qe,a as Pe,b as ae,c as j,d as Ie,e as b}from"./CTable-B2fFA3gN.js";import"./defineProperty-DJACW-dl.js";import"./typeof-QjJsDpFa.js";import"./emotion-react.browser.esm-CYwH7O3b.js";import"./floating-ui.dom-ByRZgDQ1.js";import"./RawMaterial-BtjEDAbB.js";import"./cil-mobile-CRjBRZgk.js";import"./CFormControlWrapper-CgtL4Ts4.js";const ds=()=>{var W,O,U,V;u.useRef({});const[ie,w]=u.useState(!1),[re,M]=u.useState(!1),[q,le]=u.useState([]),[h,C]=u.useState([]),[oe,E]=u.useState(!1),[p,S]=u.useState(null),[P,f]=u.useState([]),[k,L]=u.useState({name:"",id:null});be();const{showToast:m}=ye(),{t:a}=Ce("global"),[n,g]=u.useState({project_id:"",name:"",desc:"",expense_id:void 0,typeNotSet:!0,qty:1,price:0,total_price:0,expense_date:new Date().toISOString().split("T")[0],contact:"",payment_by:"",payment_type:"",pending_amount:"",show:!0,isGst:!1,photoAvailable:!0,photo_url:null,photo_remark:"",bank_name:"",acc_number:"",ifsc:"",aadhar:"",pan:"",transaction_id:"",gst:18,sgst:9,cgst:9,igst:0,gstAmount:0,sgstAmount:0,cgstAmount:0,igstAmount:0,baseAmount:0}),G=()=>{const s=localStorage.getItem("i18nextLng"),t=K.language;return s||t||"en"},I=(s,t=null)=>(t||G())==="mr"&&s.localName||s.name,D=async()=>{try{const s=await Q("/api/expenseType");le(s.filter(t=>t.show===1))}catch(s){m("danger","Error occurred "+s)}};u.useEffect(()=>{D()},[]),u.useEffect(()=>{D()},[K.language]);const N=s=>{const t=parseFloat(s.total_price)||0,r=parseFloat(s.gst)||0,c=parseFloat(s.cgst)||0,_=parseFloat(s.sgst)||0,B=parseFloat(s.igst)||0;if(r<=0||t<=0)return s.baseAmount=Number(t.toFixed(2)),s.gstAmount=s.cgstAmount=s.sgstAmount=s.igstAmount=0,s;const y=t/(1+r/100),i=y*(c/100),v=y*(_/100),T=y*(B/100);return s.baseAmount=Number(y.toFixed(2)),s.cgstAmount=Number(i.toFixed(2)),s.sgstAmount=Number(v.toFixed(2)),s.igstAmount=Number(T.toFixed(2)),s.gstAmount=Number((s.cgstAmount+s.sgstAmount+s.igstAmount).toFixed(2)),s},l=s=>{const{name:t,value:r,type:c,checked:_,files:B}=s.target;g(y=>{let i={...y};if(c==="file"&&t==="photo_url")return i.photo_url=B[0]||null,i;if(c==="checkbox"&&t==="isGst")return i.isGst=_,_?N(i):(i.baseAmount=Number((i.total_price||0).toFixed(2)),i.gstAmount=i.cgstAmount=i.sgstAmount=i.igstAmount=0),i;if(t==="price"||t==="qty"){i[t]=r===""?"":r;const v=parseFloat(t==="qty"?r||0:i.qty||0)||0,T=parseFloat(t==="price"?r||0:i.price||0)||0;return i.total_price=Number((v*T).toFixed(2)),i.isGst&&N(i),i}if(t==="total_price")return i.total_price=Number(r||0),i.isGst&&N(i),i;if(t==="gst"){i.gst=Number(r||0);const v=(Number(r)||0)/2;return i.cgst=Number(v.toFixed(2)),i.sgst=Number(v.toFixed(2)),i.isGst&&N(i),i}return["cgst","sgst","igst"].includes(t)?(i[t]=Number(r||0),i.gst=Number(((Number(i.cgst)||0)+(Number(i.sgst)||0)+(Number(i.igst)||0)).toFixed(2)),i.isGst&&N(i),i):(i[t]=c==="checkbox"?_:r,i)})},ce=async s=>{if(s.length>0)try{const t=await Q(`/api/projects?searchQuery=${s}`);t!=null&&t.length?f(t):f([])}catch(t){m("danger","Error fetching projects: "+t)}else f([])},de=s=>{const t=s.target.value;L({name:t,id:null}),ce(t)},R=s=>{L({name:s.project_name,id:s.id}),g(t=>({...t,project_id:s.id})),f([])},me=()=>{if(n.expense_id&&n.price>0&&n.qty>0&&n.project_id){const s=q.find(c=>c.id===parseInt(n.expense_id)),t=G(),r={...n,expense_type_name:s?I(s,t):"Unknown",customer_name:k.name,id:Date.now()};if(p){const c=h.map(_=>_.id===p.id?{...r,id:p.id}:_);C(c),m("success",a("MSG.expense_updated_successfully")),S(null)}else C([...h,r]),m("success",a("MSG.expense_added_to_list"));A()}else g(s=>({...s,typeNotSet:s.expense_id===void 0})),m("danger",a("MSG.fill_required_fields"))},pe=s=>{g({project_id:s.project_id,name:s.name,desc:s.desc||"",expense_id:s.expense_id,typeNotSet:!1,qty:s.qty,price:s.price,total_price:s.total_price,expense_date:s.expense_date,contact:s.contact,payment_by:s.payment_by,payment_type:s.payment_type,pending_amount:s.pending_amount,show:s.show,isGst:s.isGst}),L({name:s.customer_name,id:s.project_id}),S(s),w(!1),window.scrollTo({top:0,behavior:"smooth"}),m("info",a("MSG.expense_loaded_for_editing"))},he=()=>{S(null),A(),m("info",a("MSG.edit_cancelled"))},ue=s=>{const t=h.filter(r=>r.id!==s);C(t),p&&p.id===s&&(S(null),A()),m("info",a("MSG.expense_removed_from_list"))},xe=async s=>{if(s.preventDefault(),s.stopPropagation(),w(!0),n.contact&&!/^\d{10}$/.test(n.contact)){m("danger","Contact number must be exactly 10 digits.");return}if(!n.payment_type){m("danger","Please select payment type");return}if(n.photoAvailable&&!(n.photo_url instanceof File)){m("danger","Please upload a photo since 'Photo Available' is checked.");return}const t=new FormData;if(t.append("project_id",n.project_id),t.append("name",n.name),t.append("desc",n.desc||""),t.append("expense_id",n.expense_id),t.append("typeNotSet",n.typeNotSet?1:0),t.append("qty",n.qty),t.append("price",n.price),t.append("total_price",n.total_price),t.append("expense_date",n.expense_date),t.append("contact",n.contact),t.append("payment_by",n.payment_by),t.append("payment_type",n.payment_type),t.append("pending_amount",n.pending_amount),t.append("show",n.show?1:0),t.append("isGst",n.isGst?1:0),t.append("photoAvailable",n.photoAvailable?1:0),t.append("photo_remark",n.photo_remark||""),t.append("bank_name",n.bank_name||""),t.append("acc_number",n.acc_number||""),t.append("ifsc",n.ifsc||""),t.append("transaction_id",n.transaction_id||""),t.append("gst",n.gstAmount||""),t.append("sgst",n.sgstAmount||""),t.append("cgst",n.cgstAmount||""),t.append("igst",n.igstAmount||""),n.photo_url instanceof File&&t.append("photo_url",n.photo_url),n.expense_id&&n.price>0&&n.qty>0&&n.project_id)try{await fe("/api/expense",t)?m("success",a("MSG.new_expense_added_successfully_msg")):m("danger",a("MSG.error_occured_please_try_again_later_msg")),A()}catch(r){m("danger","Error occurred "+r)}else g(r=>({...r,typeNotSet:r.expense_id===void 0}))},_e=async()=>{if(h.length===0){m("warning",a("MSG.add_atleast_one_expense"));return}E(!0)},ge=async()=>{try{const s=h.map(c=>{const{id:_,expense_type_name:B,customer_name:y,...i}=c;return ve("/api/expense",i)}),r=(await Promise.all(s)).filter(c=>c).length;if(r===h.length){const c=a("MSG.expenses_submitted_successfully",{count:r})||`${r} expenses submitted successfully`;m("success",c),C([]),S(null)}else{const c=a("MSG.partial_expenses_submitted",{successCount:r,totalCount:h.length})||`${r} out of ${h.length} expenses submitted`;m("warning",c)}}catch(s){const t=a("MSG.error_occurred")||"Error occurred";m("danger",`${t}: ${s}`)}E(!1)},$=()=>{const s=h.reduce((t,r)=>{const c=parseFloat(r.qty)||0,_=parseFloat(r.price)||0;return t+c*_},0);return Number(s.toFixed(2))},F=s=>`₹${parseFloat(s).toFixed(2)}`,z=new Date().toISOString().split("T")[0],A=async()=>{g({project_id:"",name:"",desc:"",expense_id:"",qty:"",price:0,total_price:0,expense_date:z,contact:"",payment_by:"",payment_type:"",pending_amount:"",show:!0,typeNotSet:!1,isGst:!1,photo_remark:"",bank_name:"",acc_number:"",ifsc:"",transaction_id:""}),L({name:"",id:null}),f([]),w(!1)},je=G(),H=q.map(s=>({value:s.id,label:I(s,je)}));return e.jsxs(e.Fragment,{children:[e.jsx(X,{children:e.jsx(Y,{xs:12,children:e.jsxs(Z,{className:"mb-4",children:[e.jsx(se,{children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("strong",{children:[a(p?"LABELS.edit_expense":"LABELS.new_expense"),p&&e.jsx("span",{className:"ms-2 badge bg-warning text-dark",children:a("LABELS.editing_mode")})]}),e.jsx(x,{color:"danger",size:"sm",onClick:()=>window.location.href="/#/expense/new-type",children:a("LABELS.new_expense_type")})]})}),e.jsx(ee,{children:e.jsxs(Ge,{noValidate:!0,validated:ie,onSubmit:xe,children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-sm-3",style:{position:"relative"},children:[e.jsx(o,{htmlFor:"project_id",children:e.jsx("b",{children:a("LABELS.project_name")})}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx(d,{type:"text",id:"project_id",placeholder:a("LABELS.enter_project_name"),name:"customerName",value:k.name,onChange:de,autoComplete:"off",required:!0,feedbackInvalid:a("MSG.customer_name_validation"),style:{paddingRight:"40px"}}),k.name?e.jsx(x,{color:"danger",variant:"outline",onClick:()=>{L({name:""}),f([])},style:{position:"absolute",right:"0",top:"0",bottom:"0",zIndex:5,borderTopLeftRadius:0,borderBottomLeftRadius:0},children:e.jsx(J,{icon:Me})}):e.jsx(x,{color:"primary",variant:"outline",onClick:()=>M(!0),style:{position:"absolute",right:"0",top:"0",bottom:"0",zIndex:5,borderTopLeftRadius:0,borderBottomLeftRadius:0},children:e.jsx(J,{icon:Te})})]}),P.length>0&&e.jsx("ul",{className:"suggestions-list",style:{position:"absolute",zIndex:1e3,background:"white",border:"1px solid #ccc",listStyle:"none",padding:0,maxHeight:"200px",overflowY:"auto",width:"100%"},children:P.map(s=>e.jsx("li",{onClick:()=>R(s),style:{padding:"8px",cursor:"pointer",borderBottom:"1px solid #eee"},onMouseEnter:t=>t.target.style.background="#f5f5f5",onMouseLeave:t=>t.target.style.background="white",children:s==null?void 0:s.project_name},s.id))})]}),e.jsx("div",{className:"col-sm-3",children:e.jsxs("div",{className:"",children:[e.jsx(o,{htmlFor:"expense_id",children:e.jsx("b",{children:a("LABELS.expense_type")})}),e.jsx(Se,{id:"expense_id",name:"expense_id",value:H.find(s=>String(s.value)===String(n.expense_id))||null,onChange:s=>g(t=>({...t,expense_id:s?s.value:""})),options:H,placeholder:a("MSG.select_expense_type_msg"),isClearable:!0,isSearchable:!0,styles:{control:s=>({...s,borderRadius:"0.5rem",borderColor:"#ced4da",minHeight:"38px"})}})]})}),e.jsx("div",{className:"col-sm-3",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(o,{htmlFor:"name",children:e.jsx("b",{children:a("LABELS.about_expense")})}),e.jsx(d,{type:"text",id:"name",placeholder:a("LABELS.enter_expense_description"),name:"name",value:n.name,onChange:l})]})}),e.jsx("div",{className:"col-sm-3",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(o,{htmlFor:"expense_date",children:e.jsx("b",{children:a("LABELS.expense_date")})}),e.jsx(d,{type:"date",id:"expense_date",name:"expense_date",max:z,value:n.expense_date,onChange:l,required:!0,feedbackInvalid:a("MSG.select_date_validation")})]})})]}),e.jsxs("div",{className:"row align-items-end",children:[e.jsx("div",{className:"col-sm-3",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(o,{htmlFor:"price",children:e.jsx("b",{children:a("LABELS.price_per_unit")})}),e.jsx(d,{type:"number",min:"0",id:"price",onWheel:s=>s.target.blur(),placeholder:"0.00",step:"0.01",name:"price",onFocus:()=>g(s=>({...s,price:""})),value:n.price,onChange:l,required:!0,feedbackInvalid:a("MSG.price_validation")})]})}),e.jsx("div",{className:"col-sm-3",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(o,{htmlFor:"qty",children:e.jsx("b",{children:a("LABELS.total_units")})}),e.jsx(d,{type:"number",id:"qty",step:"0.01",min:"0",placeholder:" ",name:"qty",value:n.qty,onWheel:s=>s.target.blur(),onKeyDown:s=>{["e","+","-",","].includes(s.key)&&s.preventDefault()},onChange:s=>{const t=s.target.value;(t===""||/^\d+(\.\d{0,2})?$/.test(t))&&l(s)},required:!0,feedbackInvalid:a("MSG.quantity_validation")})]})}),e.jsx("div",{className:"col-sm-3",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(te,{id:"isGst",name:"isGst",label:"Is GST Bill",checked:n.isGst,onChange:l}),n.isGst&&e.jsx("small",{className:"text-muted d-block ms-4"})]})}),e.jsx("div",{className:"col-sm-3",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(o,{htmlFor:"total_price",children:e.jsx("b",{children:a("LABELS.total_price")})}),e.jsx(d,{type:"number",min:"0",onWheel:s=>s.target.blur(),id:"total_price",placeholder:"",name:"total_price",value:n.total_price,onChange:l,readOnly:!0})]})})]}),n.isGst&&e.jsxs("div",{className:"row mt-3 p-3 border rounded bg-light mb-3",children:[e.jsxs("div",{className:"col-sm-3",children:[e.jsx(o,{children:e.jsx("b",{children:"Total GST (%)"})}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(d,{type:"number",name:"gst",value:n.gst,onChange:l,min:"0",step:"0.01"}),e.jsx("span",{className:"ms-2",children:"%"})]}),e.jsxs("small",{className:"text-muted",children:["GST Amount: ₹",((W=n.gstAmount)==null?void 0:W.toFixed(2))||"0.00"]})]}),e.jsxs("div",{className:"col-sm-3",children:[e.jsx(o,{children:e.jsx("b",{children:"SGST (%)"})}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(d,{type:"number",name:"sgst",value:n.sgst,onChange:l,min:"0",step:"0.01"}),e.jsx("span",{className:"ms-2",children:"%"})]}),e.jsxs("small",{className:"text-muted",children:["SGST Amount: ₹",((O=n.sgstAmount)==null?void 0:O.toFixed(2))||"0.00"]})]}),e.jsxs("div",{className:"col-sm-3",children:[e.jsx(o,{children:e.jsx("b",{children:"CGST (%)"})}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(d,{type:"number",name:"cgst",value:n.cgst,onChange:l,min:"0",step:"0.01"}),e.jsx("span",{className:"ms-2",children:"%"})]}),e.jsxs("small",{className:"text-muted",children:["CGST Amount: ₹",((U=n.cgstAmount)==null?void 0:U.toFixed(2))||"0.00"]})]}),e.jsxs("div",{className:"col-sm-3",children:[e.jsx(o,{children:e.jsx("b",{children:"IGST (%)"})}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(d,{type:"number",name:"igst",value:n.igst,onChange:l,min:"0",step:"0.01"}),e.jsx("span",{className:"ms-2",children:"%"})]}),e.jsxs("small",{className:"text-muted",children:["IGST Amount: ₹",((V=n.igstAmount)==null?void 0:V.toFixed(2))||"0.00"]})]}),e.jsx("div",{className:"col-12 mt-2",children:e.jsxs("div",{className:"p-2 bg-info-subtle rounded",children:[e.jsx("strong",{children:"Note:"})," Total price remains unchanged. The values above show how much GST/CGST/SGST/IGST are included inside the current total price."]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-3",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(o,{htmlFor:"contact",children:e.jsx("b",{children:a("LABELS.contact")})}),e.jsx(d,{type:"text",id:"contact",placeholder:a("LABELS.enter_contact"),name:"contact",value:n.contact,onChange:s=>{const t=s.target.value;/^\d{0,10}$/.test(t)&&l(s)},maxLength:10,inputMode:"numeric"})]})}),e.jsx("div",{className:"col-sm-3",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(o,{htmlFor:"payment_by",children:e.jsx("b",{children:a("LABELS.payment_by")})}),e.jsxs(ne,{id:"payment_by",name:"payment_by",value:n.payment_by,onChange:l,children:[e.jsx("option",{value:"",children:a("LABELS.select_payment_by")}),Le.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]})]})}),e.jsx("div",{className:"col-sm-3",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(o,{htmlFor:"payment_type",children:e.jsx("b",{children:a("LABELS.payment_type")})}),e.jsxs(ne,{id:"payment_type",name:"payment_type",value:n.payment_type||"",onChange:l,required:!0,feedbackInvalid:"Please select a payment type",children:[e.jsx("option",{value:"",children:"Select Payment Type"}),Ne.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]})]})}),e.jsx("div",{className:"col-sm-3",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(o,{htmlFor:"pending_amount",children:e.jsx("b",{children:a("LABELS.pending_amount")})}),e.jsx(d,{type:"number",id:"pending_amount",placeholder:a("LABELS.enter_pending_amount"),name:"pending_amount",value:n.pending_amount,onChange:l})]})})]}),n.payment_type==="IMPS/NEFT/RTGS"&&e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-3",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(o,{htmlFor:"bank_name",children:e.jsx("b",{children:a("LABELS.bank_name")})}),e.jsx(d,{type:"text",id:"bank_name",placeholder:a("LABELS.enter_bank_name"),name:"bank_name",value:n.bank_name,onChange:l})]})}),e.jsx("div",{className:"col-sm-3",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(o,{htmlFor:"acc_number",children:e.jsx("b",{children:a("LABELS.acc_number")})}),e.jsx(d,{type:"text",id:"acc_number",placeholder:a("LABELS.enter_acc_number"),name:"acc_number",value:n.acc_number,onChange:l})]})}),e.jsx("div",{className:"col-sm-3",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(o,{htmlFor:"ifsc",children:e.jsx("b",{children:a("LABELS.ifsc")})}),e.jsx(d,{type:"text",id:"ifsc",placeholder:a("LABELS.enter_ifsc"),name:"ifsc",value:n.ifsc,onChange:l})]})}),e.jsx("div",{className:"col-sm-3",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(o,{htmlFor:"transaction_id",children:e.jsx("b",{children:a("LABELS.transaction_id")})}),e.jsx(d,{type:"text",id:"transaction_id",placeholder:a("LABELS.enter_transaction_id"),name:"transaction_id",value:n.transaction_id,onChange:l})]})})]}),n.payment_type==="upi"&&e.jsx("div",{className:"col-sm-3",children:e.jsxs("div",{className:"mb-3",children:[e.jsx(o,{htmlFor:"transaction_id",children:e.jsx("b",{children:a("LABELS.transaction_id")})}),e.jsx(d,{type:"text",id:"transaction_id",placeholder:a("LABELS.enter_transaction_id"),name:"transaction_id",value:n.transaction_id,onChange:l})]})}),e.jsxs("div",{className:"row mt-3",children:[e.jsx("div",{className:"col-sm-3",children:e.jsx(te,{id:"photoAvailable",name:"photoAvailable",label:"Photo Available",checked:n.photoAvailable,onChange:l})}),n.photoAvailable?e.jsxs("div",{className:"col-sm-6",children:[e.jsx(o,{htmlFor:"photo_url",children:e.jsx("b",{children:"Upload Photo"})}),e.jsx(d,{type:"file",id:"photo_url",name:"photo_url",accept:"image/png, image/jpeg, image/jpg, application/pdf",onChange:l})]}):e.jsxs("div",{className:"col-sm-6",children:[e.jsx(o,{htmlFor:"photo_remark",children:e.jsx("b",{children:"Photo Remark"})}),e.jsx(d,{type:"text",id:"photo_remark",name:"photo_remark",placeholder:"Enter remark",value:n.photo_remark,onChange:l})]})]}),e.jsxs("div",{className:"mb-3 mt-3",children:[e.jsx(x,{color:"success",type:"submit",children:a("LABELS.submit")})," ",e.jsx(x,{color:"primary",type:"button",onClick:me,children:a(p?"LABELS.update_in_list":"LABELS.add_to_list")})," ",p&&e.jsxs(e.Fragment,{children:[e.jsx(x,{color:"warning",type:"button",onClick:he,children:a("LABELS.cancel_edit")})," "]}),e.jsx(x,{color:"secondary",onClick:A,children:a("LABELS.clear")})]})]})})]})})}),h.length>0&&e.jsx(X,{children:e.jsx(Y,{xs:12,children:e.jsxs(Z,{className:"mb-4",children:[e.jsx(se,{children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("strong",{children:[a("LABELS.expenses_list")," (",h.length,")"]}),e.jsxs("span",{children:[a("LABELS.total_amount"),": ",e.jsx("strong",{children:F($())})]})]})}),e.jsxs(ee,{children:[e.jsx("div",{className:"table-responsive",children:e.jsxs(qe,{striped:!0,hover:!0,children:[e.jsx(Pe,{children:e.jsxs(ae,{children:[e.jsx(j,{children:a("LABELS.customer_name")}),e.jsx(j,{children:a("LABELS.expense_type")}),e.jsx(j,{children:a("LABELS.description")}),e.jsx(j,{children:a("LABELS.date")}),e.jsx(j,{children:a("LABELS.price")}),e.jsx(j,{children:a("LABELS.quantity")}),e.jsx(j,{children:a("LABELS.total")}),e.jsx(j,{children:a("LABELS.actions")})]})}),e.jsx(Ie,{children:h.map(s=>e.jsxs(ae,{className:p&&p.id===s.id?"table-warning":"",children:[e.jsx(b,{children:s.customer_name}),e.jsx(b,{children:s.expense_type_name}),e.jsx(b,{children:s.name||"-"}),e.jsx(b,{children:s.expense_date}),e.jsx(b,{children:F(s.price)}),e.jsx(b,{children:s.qty}),e.jsx(b,{children:F(s.total_price)}),e.jsxs(b,{children:[e.jsx(x,{color:"info",size:"sm",onClick:()=>pe(s),className:"me-1",disabled:p&&p.id===s.id,children:p&&p.id===s.id?a("LABELS.editing"):a("LABELS.edit")}),e.jsx(x,{color:"danger",size:"sm",onClick:()=>ue(s.id),children:a("LABELS.remove")})]})]},s.id))})]})}),e.jsxs("div",{className:"mt-3",children:[e.jsxs(x,{color:"success",size:"lg",onClick:_e,disabled:p!==null,children:[a("LABELS.submit_all_expenses")," (",h.length,")"]}),p&&e.jsx("div",{className:"mt-2",children:e.jsxs("small",{className:"text-warning",children:[e.jsx("i",{className:"fas fa-exclamation-triangle me-1"}),a("MSG.complete_edit_before_submit")]})})]})]})]})})}),e.jsxs(Ee,{visible:oe,onClose:()=>E(!1),children:[e.jsx(Fe,{children:e.jsx(Be,{children:a("LABELS.confirm_submission")})}),e.jsxs(we,{children:[e.jsx("p",{children:a("MSG.confirm_submit_expenses",{count:h.length})}),e.jsx("p",{children:e.jsxs("strong",{children:[a("LABELS.total_amount"),": ",F($().toFixed(2))]})})]}),e.jsxs(ke,{children:[e.jsx(x,{color:"secondary",onClick:()=>E(!1),children:a("LABELS.cancel")}),e.jsx(x,{color:"primary",onClick:ge,children:a("LABELS.confirm_submit")})]})]}),e.jsx(Ae,{visible:re,onClose:()=>M(!1),onSelectProject:R})]})};export{ds as default};
